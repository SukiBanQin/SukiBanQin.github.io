const sound=new Howl({src:["./video/sound.mp3"]}),bgm=new Howl({src:["./video/bgm.mp3"],html5:!0,loop:!0,volume:.2});let ringId=0,bgmId=0,count=0,countFlag=!1,autoClick=!1,autoClickInterval=null,countElement=document.querySelector(".count"),myFishElement=document.querySelector(".myFish"),logoElement=document.querySelector(".logo"),autoClickElement=document.querySelector("#autoClick"),centerElement=document.querySelector("#center");const localStorageCount=localStorage.getItem("count");function startAnimate(){countElement.style.transform="scale(1.1)",myFishElement.style.transform="scale(.95)";const e=document.createElement("div");e.classList.add("subtitleCountTip"),e.innerText="功德 + 1，佛祖保佑你",centerElement.appendChild(e),setTimeout((()=>{e.remove()}),1e3)}function initAnimate(){countElement.style.transform="scale(1)",myFishElement.style.transform="scale(1)"}function counter(){countFlag=!0,count++,countElement.innerHTML=String(count),startAnimate(),0!==ringId?(sound.playing()&&sound.stop(ringId),sound.play(ringId)):ringId=sound.play(),localStorage.setItem("count",String(count))}localStorageCount&&(count=Number(localStorageCount),countElement.innerHTML=String(count)),document.onkeyup=e=>{" "===e.key&&(countFlag||counter())},document.onkeydown=e=>{" "===e.key&&(countFlag=!1,initAnimate())},myFishElement.addEventListener("mouseup",(()=>{counter()})),myFishElement.addEventListener("mousedown",(()=>{setTimeout((()=>{initAnimate()}),200)})),logoElement.addEventListener("click",(()=>{bgm.playing()&&"loaded"===bgm.state().toString()?bgm.pause(bgmId):0!==bgmId?bgm.play(bgmId):bgmId=bgm.play()})),autoClickElement.addEventListener("click",(()=>{autoClick=!autoClick,autoClick?(autoClickElement.classList.add("confirm"),autoClickInterval=setInterval((()=>{counter(),setTimeout((()=>{initAnimate()}),200)}),500)):(autoClickElement.classList.remove("confirm"),clearInterval(autoClickInterval))}));